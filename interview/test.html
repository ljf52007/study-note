<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .foo{
            width: 100px;
            height: 100px;
            background-color: red;
        }
    </style>
</head>
<body>
    <div class="foo">

    </div>
    <script>
        // 防抖函数
        const debounce = (fn, wait) => {
            let timer = 0;
            return (...arg) => {
                if (timer) clearTimeout(timer);
                timer = setTimeout(() => {
                    fn.apply(this, arg);
                }, wait);
            }
        }
        const consoleWord = () => {
            console.log('search');
        }
        const foo = document.querySelector('.foo');
        foo.addEventListener('click', debounce(consoleWord, 3000), false);




        // // 原生实现map
        // Array.prototype.myMap = function (fn, thisValue) {
        //     let res = [];
        //     let arr = this;
        //     for (let i=0; i < arr.length; i++) {
        //         res.push(fn.call(thisValue, arr[i], i, arr));
        //     }
        //     return res;
        // }

        // // reduce实现map
        // Array.prototype.reduceMap = function (fn, thisValue) {
        //     thisValue = thisValue || [];
        //     let res = [];
        //     this.reduce((pre, cur, index, arr) => {
        //         res.push(fn.call(thisValue, pre, cur, index, arr));
        //     }, 0);
        //     return res;
        // }

        // // 原生实现reduce
        // Array.prototype.myReduce = function (fn, initValue) {
        //     initValue = initValue || 0;
        //     let pre = initValue;
        //     let arr = this;
        //     for (let i=0; i< arr.length; i++) {
        //         pre = fn(pre, arr[i], i, arr);
        //     }
        //     return pre;
        // }

        // // 数组扁平化（降维）
        // let a = [1,[2,3,[4,[5]]]]; 
        // // console.log(a.flat()); // [1,2,3,[4,[5]]]
        // // console.log(a.flat(1)); // [1,2,3,[4,[5]]]
        // // console.log(a.flat(Infinity)); // [1,2,3,4,5]
        
        // // 用concat实现数组扁平化
        // Array.prototype.myFlat = function (num) {
        //     if (!num && num !== 0) {
        //         num = 1;
        //     }
        //     let res = [];
        //     let arr = this;
        //     let index = 0;
        //     for (let i=0; i<arr.length; i++) {
        //         if (index >= num) {
        //             for (let j=i; j<arr.length; j++) {
        //                 res.push(arr[j]);
        //             }
        //             return res;
        //         }
        //         if (Array.isArray(arr[i])) {
        //             index++;
        //             res = res.concat(arr[i].myFlat(num - index));
        //         } else {
        //             res.push(arr[i]);
        //         }
        //     }
        //     return res;
        // }
        // // console.log(a.myFlat()); // [1,2,3,[4,[5]]]
        // // console.log(a.myFlat(-1)); // [1,[2,3,[4,[5]]]]
        // // console.log(a.myFlat(1)); // [1,2,3,[4,[5]]]
        // // console.log(a.myFlat(2)); // [1,2,3,4,[5]]
        // // console.log(a.myFlat(Infinity)); // [1,2,3,4,5]
        // // console.log('---------------')
        // // console.log(a.flat()); // [1,2,3,[4,[5]]]
        // // console.log(a.flat(-1)); // [1,[2,3,[4,[5]]]]
        // // console.log(a.flat(1)); // [1,2,3,[4,[5]]]
        // // console.log(a.flat(2)); // [1,2,3,4,[5]]
        // // console.log(a.flat(Infinity)); // [1,2,3,4,5]

        // // 

        // let obj={
        //     id:1,
        //     name:'Tom',
        //     msg:{
        //         age:18
        //     },
        //     arr: [1,2]
        // }
        // let o = {}
        // // Object.assign(o,obj)
        // deepCopy(o, obj);
        // o.arr[0] = 2;
        // o.msg.age = 19;
        // // console.log(o)
        // // console.log(obj)
        // function deepCopy(newObj, oldObj){
        //     for (let key of Object.keys(oldObj)) {
        //         // 判断当前是否为数组或对象
        //         if (oldObj[key] instanceof Array) {
        //             newObj[key] = [...oldObj[key]];
        //         }
        //         else if (oldObj[key] instanceof Object) {
        //             newObj[key]= {};
        //             deepCopy(newObj[key], oldObj[key]);
        //         }
        //         else {
        //             newObj[key] = oldObj[key];
        //         }
        //     }
        // }

        // // class Person {
        // //     constructor(name) {
        // //         this.name = name
        // //     }
        // // }
        // // let p1 = new Person('ljf');


        // function Person1(name,age){
        //     this.name=name
        //     this.age=age
        // }
        // Person1.prototype.sayHi=function(){
        //     console.log('Hi！我是'+this.name)
        // }
        // let p1=new Person1('张三',18);
        // console.log(p1)

        // function myNew(fn, arg) {
        //     let obj = Object.create(fn.prototype); // 创建对象obj，并将obj的__proto__指向构造函数的prototype
        //     let res = fn.apply(obj, arg);
        //     return typeof res === 'object' ? res : obj;
        // }


    </script>
</body>
</html>