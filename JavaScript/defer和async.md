## 直接使用`script`标签

直接使用`script`脚本,`html`会按照顺序来加载并执行脚本,在加载和执行的过程中,会阻塞后续的`dom`渲染.

因此,如果在页面中引入第三方脚本,如果第三方服务商出现类似延迟的问题,就会使得页面长时间白屏.



## `defer`属性的`script`标签

`script`标签添加`defer`属性,它遵循以下的规则:

- 浏览器会异步并行加载脚本,不会阻塞后续文档元素的加载和`dom`渲染;
- 如果有多个设置了`defer`的`script`脚本,会按照顺序执行,上一个`script`脚本执行完后,才会执行下一个`script`脚本;
- 带有`defer`属性的`script`脚本,会在所有的`dom`元素解析完成之后再执行;而`DOMContentLoaded`事件,会在所有`defer`属性的`script`脚本执行完后,再触发.

**推荐的应用场景:**

- 如果脚本代码依赖于页面中的`DOM`元素(或者说依赖于文档是否加载完毕);
- 如果脚本被其他脚本文件所依赖

如:评论框,代码语法高亮,`polyfill.js`等



## `async`属性的`script`标签

`script`标签添加`async`属性,它遵循以下的规则:

- 浏览器会异步并行加载脚本,不会阻塞后续文档元素的加载和`dom`渲染;
- `async`脚本不分顺序,加载完毕后,立即执行;
- `async`脚本在加载完毕后立即执行,因此它不需要等待`dom`元素解析完成后再执行;
- `DOMContentLoaded`事件的触发也不受`async`脚本加载和执行的影响.

**推荐的应用场景:**

- 如果脚本代码并不关心页面中的`dom`元素(或者说并不关心文档是否加载完毕)
- 脚本不会产生其他脚本需要的数据.

如：百度统计

一般来说,如果不太确定用哪一个属性,用`defer`通常比`async`要稳定.